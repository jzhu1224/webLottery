<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>ç½‘é¡µæŠ½å¥–å°å·¥å…·</title>

    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="baidu-tc-verification" content="3e8294dabe46e8def7d4b790be59d4cc">

    <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.7.2.custom.css">
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>

    <style type="text/css">

        .ui-tabs .ui-tabs-panel {
            padding: 0;
        }

        table {
            margin: 12px auto;
            border-collapse: collapse;

        }

        th,
        td {
            border: 2px solid #333;
        }

        label {
            margin: 6px 0;
            font-size: 14px;
            font-weight: bold;
            display: block;
        }

        input[type=text] {
            width: 600px;
        }

        input {
            width: expression(this.type=="text"?"600px":"auto");
        }

        textarea {
            width: 600px;
        }

        #main {
            color: #000;
            margin: 0 auto;
            padding-top: 40px;;
            width: 980px;
        }

        #ui-tabs #ui-tabs-panel {
            padding: 0;
        }

        #event_title {
            color: #ff0;
            margin: 26px;
            padding: 0;
            font-size: 56px;
            text-align: center;
        }

        #event_title span {
            padding: 0 32px;
        }

        #rolling_board {
            color: #fff;
            line-height: 40px;
            font-size: 40px;
            font-weight: bold;
            margin: 34px auto;
            padding: 8px;
            width: 640px;
            text-align: center;
            /*            background: #fed07c;
            */
        }

        #current_step {
            line-height: 42px;
            font-size: 42px;
            font-weight: bold;
            color: #fff;
        }

        #tabs {
            padding: 0;
        }

        #tabs-1 {
            font-size: 14px;
            text-align: center;
        }

        #tabs-2,
        #tabs-3,
        #tabs-4 {
            /*            padding: 4px;
            */
            border: 1px solid #ccc;
        }

        #tabs-3 h3,
        #tabs-4 h3 {
            padding-left: 6px;
            border-left: 6px solid #c00;
        }

        #tabs-4 h2 {
            text-align: center;
        }

        #rotate_div {
            padding-top: 30px;
            height: 300px;
        }

        #print_box {
            margin-top: 30px;
            font-weight: bold;
            font-size: 28px;
            width: 70%;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
            color: #fff;
        }

        #print_box span {
            margin: 4px;
            color: #fff;
            font-size: 24px;
        }
    </style>
</head>

<body class="bg index">
<div id="container">
    <div id="wrapper" class="mh">
        <h2 style="text-align: center">åœ¨çº¿æŠ½å¥–</h2>
        <script type="text/javascript">
          var game;

          $(function () {
            $('#loading').hide();
            $('#tabs').slideDown('fast');
            $('#tabs').tabs();

            game = new Game();
            save_setting();
          });

          // ç»‘å®šå›è½¦é”®ç›˜æ“ä½œ
          $(document).keypress(function (e) {
            switch (e.which) {
              case 13:
                game.process();
                break;
            }
          });

        </script>

        <div id="main">
            <div id="loading" style="text-align: center; display: none;">
                <h2>Loading...</h2>
            </div>

            <div id="tabs" style="display: block;" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
                <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
                    <li class="ui-corner-top ui-tabs-selected ui-state-active"><a href="#tabs-1">æŠ½å¥–</a></li>
                    <li class="ui-corner-top ui-state-default"><a href="#tabs-2">è®¾ç½®</a></li>
                    <li class="ui-corner-top ui-state-default"><a href="#tabs-3">ç»“æœ</a></li>
                    <li class="ui-corner-top ui-state-default"><a href="#tabs-4">å¸®åŠ©</a></li>
                </ul>

                <div id="tabs-1" style="background-color: lightpink;"
                     class="ui-tabs-panel ui-widget-content ui-corner-bottom">
                    <!--                         <h1 id="event_title"><span>æŠ½å¥–æ´»åŠ¨</span></h1>
                     -->
<!--                    <img width="976px" style="margin: 0 2px 0 2px "-->
<!--          src="https://res.cloudinary.com/shenmanz/image/upload/v1576872380/shenma/event/WechatIMG129.jpg"/>-->
                    <div style="height: 300px; width: 976px;line-height: 300px;font-size: 36px; color: rgba(0,0,0,0.65)">
                        TERRA åœ¨çº¿æŠ½å¥–
                    </div>
                    <div id="rotate_div" style="display: block;">
                        <div><span id="current_step" style="display: none;">ä¸€ç­‰å¥–(1ä¸ª)</span></div>

                        <div id="rolling_board" style="display: none;"><span style="color: #f33">å‘˜å·¥L</span></div>

                        <div id="print_box" style="display: block;">press Enter to start</div>
                    </div>
                </div>
                <!-- /#tabs-1 -->

                <div id="tabs-2" style="background: #fff;"
                     class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
                    <label>æ´»åŠ¨æ ‡é¢˜</label>
                    <div><input type="text" name="title" value=""></div>

                    <label>å¥–é¡¹è®¾ç½®</label>
                    <div>æ¯è¡Œä¸€ä¸ªå¥–é¡¹, æ ¼å¼ä¸ºç«–çº¿åˆ†éš”çš„: å¥–é¡¹å|æ•°é‡|æ¯æ¬¡æŠ½å‡ ä¸ª|å¥–å“</div>
                    <textarea name="prizes" rows="6" cols="84">
TERRA|1|1|Foreo LUNA MINI 3
                        </textarea>

                    <label>å€™é€‰äººåˆ—è¡¨</label>
                    <div>æ¯è¡Œä¸€äºº, æˆ–åŠè§’é€—å·åˆ†éš”</div>
                    <textarea name="candidates" rows="6" cols="84">
0211716219	æ–°è¥¿å…°åæ§½å›
02102216765	é’Ÿ11
0210524212	ğŸ‘‘Alexç‚ğŸŒ»
0210345640	ğŸ’—ğŸ€Cecilia ä¸¹ä¸¹ğŸ€ğŸ’—
02102871950	Keri
0221856699	JiağŸ’•(çº½æ¾³è´­)
0279638904	APhilobalè²ä¹æ¾³æ–°å…¨çƒè´­
02108498850	ã‚¸ãƒ¥ãƒ³*è³ŠAlisa
0279661032	Tina
02102854510	å¾®ç¬‘ã®æˆ‘^_^ï¼ˆæ—¶å·®+5å°æ—¶ï¼‰
0211028275	Sabrina
0220163882	ğŸ¡TianğŸ¬
0212173431	Heather
0220980831	Ivy Lim ğŸ‘«ğŸ‘§
02108381102	vÃ©roğŸ’—æ‹›ä»£ç†
0225253810	é˜³å…‰ä¸‹çš„æµ·é¢
02102705025	å¯å¿ƒğŸ’‹æ¾³æ–°ç¾ä»£è´­æ‹›ä»£ç†
02102683300	îŒ˜ Meihua
0223786126	è¿½é€ æ—¶å·®+5
0221098836	angelaæµ·å¤–å•†åŸ
0225058928	æµ·æ·˜å®å®
0210338262	YEYE
0212860889	èµµå°å˜Ÿä»–é¢å¨˜
0274209585	å°ç†ŠğŸ„
02108263801	EmmağŸ‰
02108855058	adam&Abbie éº»éº»
021500118	xiaoxiao
0211898980	Tina
0210512733	ğŸŒ¸*à¹‘Ivy*à³„Li ABMé»‘å¡ä»£ç†
0220253498	Kelly
0212077882	æ¸…æ–°è‡ªç„¶çš„66
02102885221	ğŸŒ¸CrystalğŸŒ¸
02041868000	J&K New Zealand
0212856888	ç§€è‹±-Shelley
021550766	è™«è™«å¦ˆ
02108371192	å°èŒ‰èŒ‰KIWIè´­
0273423515	annazyw
0275129468	yunshan
0224503282	_  æ—­å°è‚‰ã€‚
021554128	åŠ å®¶å˜‰ä½³
0220748618	Vicky-ï¼ˆæ©˜å­åª½ï¼‰å…¼å·®ä»£è´­
0225654035	AğŸ‡³ğŸ‡¿æœæœä¸€å®¶åœ¨æ–°è¥¿å…°
0221325291	ç„¶ç„±å¦‚å¿ƒğŸ€æ…§æºèŠ·è¨€
021806699	Fini yue
0211744106	Yee
0220365389	å°ç™½å…”î”¬ æ—¶å·®+4ğŸ’
02102556788	crissy
0211834377	å¼ ä¸¹
0276663332	Mission Property-May
0212387503	may
0210316219	Hide_No_Boo
0211645787	æ‹¥æŠ±é˜³å…‰_çº½å›½ä¿å¥å“å¹³ä»·æ‰¹å‘
0210320543	carol yu
0210562462	kiko
0212087178	Aaron
021708223	kent
0212561464	ç¶­ğŸ³
02102499911	å°é¸µ
0211773130	çº½æ‘Luîî€„î€‚î€‚î€…î î€¶+5
0210445379	ç»´åº·-æ–°è¥¿å…°ä»£è´­+æ—¶å·®5å°æ—¶
02102977671	ææœˆåŠ
0277779090	â½â½ Êš á´á´€É´á´…Ê É â¾â¾
0220162799	æ¢…
0210420941	å¤§è„‘æ–§æ–§ğŸ¯
02040157164	66
0210359530	é¥­å®â€¢H
0275828288	æ¡ƒå­å®¶å¥¶ç²‰ä»£å‘--ICCæ‹›å•†
0225885165	TiNa LinğŸ€
02102692660	å°æ—
0212966677	CQL
0211113799	smartfish
0210435418	å°å”æ¾³æ–°ä»£è´­
021318233	LINDAğŸ³ ICCè·¨å¢ƒæ‹›å•†
0211357997	ä½©çª
02102545995	æ–°è¥¿å…°MiyağŸŒˆğŸ€ğŸ¤èµ³å¦ˆ
02102549961	æˆ‘æ˜¯å¦¹å­(-á·…_-á·„)
0211178572	è›‹è›‹ğŸ‘ ğŸ‘ 
0211671159	ç§€
0221066886	Zoe Zhou
02108686711	çˆ±ğŸ’–æ€å—ğŸŒŸNuskinğŸŒŸé˜¿èƒ¶ç³•
02108409991	éš¼
0275575707	helenè¦èµšğŸ’°ğŸ’°
021969880	ğŸ’¦
0212601185	ç”°æŸæ‰¬
021995196	ğŸ‘‘ ç¶¿ç¾Šè‹ ğŸ€
0211500477	éŒ¢xy
0225191668	ÊÊŸá´‹
0212107989	ç¢§æµ·æ™´å¤©
0210704949	Busy WinnyğŸ
02108289918	Alex
0212366181â€¬	å‘æ—¥è‘µå…ˆç”Ÿçš„ç§å­
02108738767	å°å€©åœ¨çº½æ‘
0211663292	æ©™å­
02102828348	KikoğŸ“ç‚ç‚ğŸ¥•

                        </textarea>

                    <label>è·³åŠ¨æ—¶é—´é—´éš”</label>
                    <div><input type="text" name="interval" value="50" style="width: 50px;"> ms</div>

                    <label>èƒŒæ™¯å›¾ç‰‡</label>
                    <div>å¯ä»¥è¾“å…¥å›¾ç‰‡é“¾æ¥ä½¿ç”¨ç½‘ç»œä¸Šçš„å›¾ç‰‡, ä¹Ÿå¯ä»¥æŠŠå›¾ç‰‡æ‹·è´åˆ°å½“å‰ç›®å½•, æŠŠå›¾ç‰‡æ–‡ä»¶åå¡«å…¥å³å¯.</div>
                    <div><input name="background_image" type="text" value="3.jpg"></div>


                    <p><input type="button" value="ä¿å­˜" onclick="save_setting()"></p>
                </div>
                <!-- /#tabs-2 -->

                <div id="tabs-3" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
                    <h2>ä¸€ç­‰å¥–</h2>å‘˜å·¥L &nbsp;<br>
                    <h2>äºŒç­‰å¥–</h2>å‘˜å·¥M &nbsp;å‘˜å·¥H &nbsp;<br>
                    <h2>ä¸‰ç­‰å¥–</h2>å‘˜å·¥E &nbsp;å‘˜å·¥A &nbsp;å‘˜å·¥I &nbsp;å‘˜å·¥B &nbsp;<br></div>
                <!-- /#tabs-3 -->

                <div id="tabs-4" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
                    <h2>æŠ½å¥–è½¯ä»¶</h2>
                    <p>åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œçš„æŠ½å¥–ç¨‹åº</p>

                    <h3>æ“ä½œæ–¹ä¾¿</h3>
                    <p>æŠ½å¥–è¿‡ç¨‹å…¨é”®ç›˜æ“ä½œ, åªéœ€è¦æŒ‰å›è½¦(Enter)é”®å³å¯, ç±»ä¼¼æ’­æ”¾PPTå¹»ç¯ç‰‡, éå¸¸ç®€å•.</p>

                    <h3>é…ç½®çµæ´»</h3>
                    <p>å¯é…ç½®çš„é€‰é¡¹æœ‰: æ´»åŠ¨æ ‡é¢˜, å¥–é¡¹, å€™é€‰äºº, æ‘‡å¥–æ—¶çš„è·³è½¬é€Ÿåº¦, èƒŒæ™¯å›¾ç‰‡. å…¶ä¸­, æ¯ä¸€ä¸ªå¥–é¡¹, å¯ä»¥ä¸€æ¬¡å¼€å®Œ, ä¹Ÿå¯ä»¥ä¸€æ¬¡åªå¼€ä¸€éƒ¨åˆ†. ä¾‹å¦‚, ä¸‰ç­‰å¥–ä¸€å…±6ä¸ª, æ¯æ¬¡åªå¼€2ä¸ª,
                        éœ€è¦å¼€3æ¬¡æ‰èƒ½å¼€å®Œä¸‰ç­‰å¥–, å¢åŠ å¨±ä¹æ€§. å›¾ç‰‡å¯ä»¥æ›´æ¢ä¸ºå¸¦è‡ªå·±å…¬å¸Logoçš„å›¾ç‰‡, ä»¥ä¾¿é€‚åº”å½“å‰èŠ‚æ—¥, æ‰€ä»¥, æœ¬æŠ½å¥–ç¨‹åºä»»ä½•èŠ‚æ—¥çš„ä»»ä½•ç±»ä¼¼çš„æŠ½å¥–èŠ‚ç›®éƒ½å¯ä½¿ç”¨.</p>

                    <h3>æŠ½å¥–æµç¨‹</h3>
                    <pre>
ç­‰å¾…å¼€å§‹
å¼€åœº(open): å¥–é¡¹ä»‹ç»
å¥–é¡¹å¾ªç¯: å¦‚æœå¤šäºä¸€ä¸ªå¥–é¡¹, åˆ™å¾ªç¯
	å¥–é¡¹å¼€åœº(step_open)
	æ‘‡å¥–å¾ªç¯: å¦‚æœä¸æ˜¯ä¸€æ¬¡å¼€å®Œä¸€ä¸ªå¥–é¡¹, åˆ™å¾ªç¯
		æ‘‡å¥–å¼€å§‹(rotate_start)
		æ‘‡å¥–ç»“æŸ(rotate_stop)
	å¥–é¡¹ç»“æŸ(step_close): å•é¡¹ä¸­å¥–åå•
é—­åœº(close)
                        </pre>
                </div>
                <!-- /#tabs-4 -->
            </div>

            <script type="text/javascript">
              function in_array(item, list) {
                for (var i = 0; i < list.length; i++) {
                  if (item == list[i]) {
                    return true;
                  }
                }
                return false;
              }

              /**
               * è¿”å›æŒ‡å®šå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•, å¦‚æœæ²¡æ‰¾åˆ°, è¿”å›-1;
               */
              function array_find(list, item) {
                for (var i = 0; i < list.length; i++) {
                  if (item == list[i]) {
                    return i;
                  }
                }
                return -1;
              }

              // ä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ . è¿”å›æ–°æ•°ç»„.
              function array_del(list, item) {
                var arr = [];
                for (var i = 0; i < list.length; i++) {
                  if (item != list[i]) {
                    arr.push(list[i]);
                  }
                }
                return arr;
              }

              // ä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ . è¿”å›æ–°æ•°ç»„.
              function array_del_all(list, items) {
                var arr = [];
                for (var i = 0; i < list.length; i++) {
                  if (array_find(items, list[i]) == -1) {
                    arr.push(list[i]);
                  }
                }
                return arr;
              }

              /**
               * æŠŠæ•°ç»„å½“ä½œç¯å½¢çš„, è¿”å›ä»startå¼€å§‹, ä¸€å…±countä¸ªå…ƒç´ .
               * å¦‚æœcountå¤§äºæ•°ç»„é•¿åº¦, è¿”å›æ•´ä¸ªæ•°ç»„.
               */
              function array_slice(list, start, count) {
                var ret;

                ret = list.slice(start, start + count);
                if (ret.length < count) {
                  ret = ret.concat(list.slice(0, count - ret.length));
                }

                return ret;
              }

              // æ‰°ä¹±æ•°ç»„å…ƒç´ çš„é¡ºåº.
              function array_shuffle(list) {
                var len = list.length;
                for (var i = 0; i < len * 5; i++) {
                  var p1 = parseInt(len * Math.random());
                  var p2 = parseInt(len * Math.random());
                  var tmp = list[p1];
                  list[p1] = list[p2];
                  list[p2] = tmp;
                }
              }

              /*
              çŠ¶æ€/åŠ¨ä½œ

              å¼€åœº(open)
              å¾ªç¯{
                  å¥–é¡¹å¼€åœº(step_open)
                  å¥–é¡¹æŠ½å¥–(rotate_start)
                  å¥–é¡¹æŠ½å¥–(rotate_stop)
                  å¥–é¡¹é—­åœº(step_close)
              }
              é—­åœº(close)

              */
              var Game = function () {
                var self = this;

                this.step = -1;
                this.interval = 100;
                this.rotate_index = 0;
                self.action = 'open';

                this.prizes = [];
                this.candidates = [];
                this.results = [];

                this.init = function () {
                  this.step = 0;
                  this.stop = false;
                  this.rotate_index = 0;
                  self.action = 'open';
                  this.results = [];

                  for (var i = 0; i < self.prizes.length; i++) {
                    var p = self.prizes[i];
                    self.results[i] = [];
                  }

                  show_current_step('');
                  var str = "press 'Enter' to start";
                  str += '<br/><br/>';
                  print_box("press 'Enter' to start");

                  $('#rolling_board').hide();
                  $('#rotate_div').css('background', '');
                }

                this.reset = function () {
                  this.prizes = [];
                  this.candidates = [];
                  this.results = [];
                }

                this.process = function () {
                  show_results();

                  // å…ˆæ›´æ–°çŠ¶æ€å†æ‰§è¡Œå‡½æ•°
                  switch (self.action) {
                    case 'open':
                      self.action = 'step_open';
                      $('#rotate_div').hide();
                      on_open();
                      $('#rotate_div').fadeIn('slow');
                      break;
                    case 'close':
                      self.action = '';
                      on_close();
                      break;
                    case 'step_open':
                      self.action = 'rotate_start';
                      $('#rotate_div').hide();
                      on_step_open();
                      $('#rotate_div').fadeIn('fast');
                      break;
                    case 'step_close':
                      if (self.step == self.prizes.length) {
                        self.action = 'close';
                      } else {
                        self.action = 'step_open';
                      }
                      on_step_close();
                      break;
                    case 'rotate_start':
                      self.action = 'rotate_stop';
                      on_rotate_start();
                      break;
                    case 'rotate_stop':
                      on_rotate_stop();
                      break;
                    default:
                      save_setting();
                      break;
                  }
                };
              }

              function on_open() {
                show_current_step('æ´»åŠ¨è¯´æ˜');

                var str = '<table align="center">';
                str += '<tr><th>å¥–é¡¹</th><th>æ•°é‡</th><th>å¥–å“</th></tr>\n';
                for (var i = game.prizes.length - 1; i >= 0; i--) {
                  var p = game.prizes[i];
                  str += '<tr><td>' + p.name + '</td><td>' + p.num + '</td><td>' + p.award + '</td></tr>\n';
                }
                str += '</table>';
                print_box(str);
              }

              function on_close() {
                show_current_step('');

                $('#print_box').hide();
                var str = '';
                str += '<span><b style="font-size: 62px;">closed</b><span><br/>';
                print_box(str);
                $('#print_box').fadeIn('slow');
              }

              function on_step_open() {
                show_current_step();
                print_box("press 'Enter' to start");
                $('#rolling_board').html('...');
              }

              function on_step_close() {
                var str = '';
                str += '<span>&nbsp;ä¸­å¥–åå•&nbsp;';
                var r = game.results[game.step - 1].map((number) => number.replaceAll(/(?<=\d{3})\d(?=\d{4})/, "*"));
                for (var n = 0; n < r.length; n++) {
                  if (n % 2 == 0) {
                    str += '<br/>' + r[n];
                  } else {
                    str += '&nbsp;|&nbsp;' + r[n];
                  }
                }
                str += '</span>';

                print_box(str);
                $('#rolling_board').slideUp('normal');
              }

              function on_rotate_start() {
                $('#rolling_board').slideDown('normal');

                game.interval = parseInt($('input[name=interval]').val());

                game.stop = false;
                game.rotate_index = 0;

                // æ‰“ä¹±é¡ºåº
                array_shuffle(game.candidates);

                rotate_run();

                show_current_step();
                print_box("press 'Enter' to stop");
              }


              function on_rotate_stop() {
                // ç­‰ä¸€æ®µéšæœºæ—¶é—´å†åœæ­¢.
                game.interval += parseInt(0.9 * game.interval);
                setTimeout('game.stop=true', 230 + parseInt(230 * Math.random()));
                //game.stop = true;
              }


              function rotate_run() {
                String.prototype.replaceAll = function (FindText, RepText) {
                  regExp = new RegExp(FindText, "g");
                  return this.replace(regExp, RepText);
                };
                var num_a = game.prizes[game.step].num_a_time;
                var size = game.prizes[game.step].num - game.results[game.step].length;
                if (size > num_a) {
                  size = num_a;
                }

                var arr = array_slice(game.candidates, game.rotate_index, size);
                $('#rolling_board').html(arr.map((number) => number.replaceAll(/(?<=\d{3})\d(?=\d{4})/, "*")).join(' '));

                game.rotate_index += num_a;
                if (game.rotate_index >= game.candidates.length) {
                  game.rotate_index -= game.candidates.length;
                }

                if (game.stop) {
                  game.action = 'rotate_start';

                  game.results[game.step] = game.results[game.step].concat(arr);
                  game.candidates = array_del_all(game.candidates, arr);

                  show_results();
                  print_box("press 'Enter' to continue");

                  if (game.results[game.step].length == game.prizes[game.step].num) {
                    game.step++;
                    game.action = 'step_close';
                  }

                  var h = '<span style="color: #f33">' + $('#rolling_board').html() + '</span>';
                  $('#rolling_board').html(h)
                } else {
                  setTimeout('rotate_run()', game.interval);
                }
              }


              function show_current_step(str) {
                if (str == undefined) {
                  var found = game.results[game.step].length;
                  var all = game.prizes[game.step].num;
                  var num_a = game.prizes[game.step].num_a_time;
                  var b = (num_a + found) > all ? all : (num_a + found);

                  var str = game.prizes[game.step].name;
                  if (num_a != all) {
                    str += ', ' + (found + 1) + '-' + all;
                  }
                }
                if (str == '') {
                  $('#current_step').hide('fast');
                } else {
                  $('#current_step').html(str);
                  $('#current_step').show();
                }
              }

              function print_box(str) {
                if (str == undefined) {
                  var str = '<span>';
                  var r = game.results[game.step];
                  for (var n = 0; n < r.length; n++) {
                    str += r[n] + ' &nbsp;';
                  }
                  str += '</span>';
                }
                if (str == '') {
                  $('#print_box').hide('fast');
                } else {
                  $('#print_box').html(str);
                  $('#print_box').show();
                }
              }

              function show_results() {
                String.prototype.replaceAll = function (FindText, RepText) {
                  regExp = new RegExp(FindText, "g");
                  return this.replace(regExp, RepText);
                };
                var str = '';
                for (var i = game.results.length - 1; i >= 0; i--) {
                  str += '<h2>' + game.prizes[i].name + '</h2>';
                  var r = game.results[i];
                  for (var n = 0; n < r.length; n++) {
                    str += r[n] + '<br/>';
                  }
                  str += '<br/>';
                }

                str += '---------------------------------------------------------------------------------------------------------<br/>';

                var str2 = '';

                for (var i = game.results.length - 1; i >= 0; i--) {
                  str2 += '<h2>' + game.prizes[i].name + '</h2>';
                  var r = game.results[i];
                  for (var n = 0; n < r.length; n++) {
                    str2 += r[n] + '<br/>';
                  }
                  str2 = str2.replaceAll(/(?<=\d{3})\d(?=\d{4})/, "*");
                  str2 += '<br/>';
                }
                str += str2;

                $('#tabs-3').html(str);
              }


              function save_setting() {
                game.reset();

                var ps = $.trim($('textarea[name=prizes]').val()).split('\n');
                for (var i = 0; i < ps.length; i++) {
                  var p = $.trim(ps[i]);
                  if (p.length == 0) {
                    continue;
                  }
                  var ex = p.split('|');
                  var prize = {
                    name: $.trim(ex[0]),
                    num: parseInt($.trim(ex[1])),
                    num_a_time: parseInt($.trim(ex[2])),
                    award: $.trim(ex[3])
                  };
                  game.prizes.push(prize);
                }

                var ps = $.trim($('textarea[name=candidates]').val()).replace(/,/g, '\n').split('\n');
                for (var i = 0; i < ps.length; i++) {
                  var p = $.trim(ps[i]);
                  if (p.length == 0) {
                    continue;
                  }
                  game.candidates.push(p);
                }

                $('#event_title span').html($('input[name=title]').val());
                //$('#tabs-1').css('background', 'url(' + $('input[name=background_image]').val() + ') center center no-repeat');

                game.init();
              }
            </script>

        </div>

    </div>
</div>
</body>

</html>
